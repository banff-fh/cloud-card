<?xml version="1.0" encoding="UTF-8"?>
<services xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/services.xsd">
    <description>cloudcard Services</description>
    <vendor></vendor>
    <version>1.0</version>
    
    <service name="myCloudCards" engine="java"
            location="com.banfftech.cloudcard.CloudCardQueryServices" invoke="myCloudCards" auth="true">
        <description>查询用户卡列表</description>
        <attribute name="viewIndex" type="Integer" mode="IN" optional="true"/>
        <attribute name="viewSize" type="Integer" mode="IN" optional="true"/>
        <attribute name="cloudCardList" type="List" mode="OUT" optional="false"/>
        <attribute name="listSize" type="Integer" mode="OUT" optional="false"/>
    </service>
    
    <service name="getBizPayment" engine="java"
            location="com.banfftech.cloudcard.CloudCardQueryServices" invoke="getBizPayment" auth="true">
        <description>查询商户交易流水</description>
        <attribute name="paymentTypeId" type="String" mode="IN" optional="false"/>
        <attribute name="paymentList" type="List" mode="OUT" optional="false"/>
    </service>
    
    <service name="getUserPayment" engine="java"
            location="com.banfftech.cloudcard.CloudCardQueryServices" invoke="getUserPayment" auth="true">
        <description>查询客户交易流水</description>
        <attribute name="paymentTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="paymentList" type="List" mode="OUT" optional="false"/>
    </service>
    
    <service name="createCardAuth" engine="java"
    	location="com.banfftech.cloudcard.CloudCardServices" invoke="createCardAuth" auth="true">
    	<description>云卡授权</description>
    	<attribute name="teleNumber" type="String" mode="IN" optional="false"/>
        <attribute name="cardId" type="String" mode="IN" optional="false"/>
        <attribute name="amount" type="BigDecimal" mode="IN" optional="false"/>
        <attribute name="fromDate" type="Timestamp" mode="IN" optional="false"/>
        <attribute name="thruDate" type="Timestamp" mode="IN" optional="false"/>
        <attribute name="customerPartyId" type="String" mode="OUT" optional="false"/> 
    </service>


    <service name="activateCloudCard" engine="java"
            location="com.banfftech.cloudcard.CloudCardServices" invoke="activateCloudCard" auth="true">
        <description>云卡激活</description>
        <attribute name="organizationPartyId" type="String" mode="IN" optional="false"><description>店家partyId</description></attribute>
        <attribute name="teleNumber" type="String" mode="IN" optional="false"><description>客户手机号码</description></attribute>
        <attribute name="cardCode" type="String" mode="IN" optional="false"><description>卡二维码、条码等唯一标识数据</description></attribute>

        <attribute name="finAccountId" type="String" mode="OUT" optional="false"><description>卡Id</description></attribute>
        <attribute name="customerPartyId" type="String" mode="OUT" optional="false"><description>客户partyId</description></attribute>
        <attribute name="paymentMethodId" type="String" mode="OUT" optional="false"><description>卡关联的paymentMethodId</description></attribute>
    </service>
    <service name="rechargeCloudCard" engine="java"
            location="com.banfftech.cloudcard.CloudCardServices" invoke="rechargeCloudCard" auth="true">
        <description>云卡充值</description>
        <attribute name="organizationPartyId" type="String" mode="IN" optional="false"><description>店家partyId</description></attribute>
        <attribute name="cardId" type="String" mode="INOUT" optional="false"><description>卡Id</description></attribute>
        <attribute name="amount" type="BigDecimal" mode="INOUT" optional="false"><description>充值金额</description></attribute>

        <attribute name="customerPartyId" type="String" mode="OUT" optional="false"><description>客户partyId</description></attribute>
        <attribute name="actualBalance" type="BigDecimal" mode="OUT" optional="false"><description>可用余额</description></attribute>
	</service>
	
	<service name="activateCloudCardAndRecharge" engine="java"
            location="com.banfftech.cloudcard.CloudCardServices" invoke="activateCloudCardAndRecharge" auth="true">
        <description>
        	开卡充值统一接口， 根据cardCode查询卡信息，查得到充值，查不到先开卡再充值，开卡需要teleNumber
        </description>
        <attribute name="organizationPartyId" type="String" mode="IN" optional="false"><description>店家partyId</description></attribute>
        <attribute name="teleNumber" type="String" mode="IN" optional="true"><description>客户手机号码</description></attribute>
        <attribute name="cardCode" type="String" mode="IN" optional="false"><description>卡二维码、条码等唯一标识数据</description></attribute>
        <attribute name="amount" type="BigDecimal" mode="INOUT" optional="false"><description>充值金额</description></attribute>

        <attribute name="cardId" type="String" mode="OUT" optional="false"><description>卡Id</description></attribute>
        <attribute name="customerPartyId" type="String" mode="OUT" optional="false"><description>客户partyId</description></attribute>
        <attribute name="cardBalance" type="BigDecimal" mode="OUT" optional="false"><description>可用余额</description></attribute>
    </service>
	
    <service name="cloudCardWithdraw" engine="java"
            location="com.banfftech.cloudcard.CloudCardServices" invoke="cloudCardWithdraw" auth="true">
        <description>云卡扫码支付</description>
        <attribute name="organizationPartyId" type="String" mode="IN" optional="false"><description>店家partyId</description></attribute>
        <attribute name="cardCode" type="String" mode="IN" optional="false"><description>卡二维码、条码等唯一标识数据</description></attribute>
        <attribute name="amount" type="BigDecimal" mode="INOUT" optional="false"><description>支付金额</description></attribute>
        
        <attribute name="cardId" type="String" mode="OUT" optional="true"><description>卡Id</description></attribute>
        <attribute name="cardBalance" type="BigDecimal" mode="OUT" optional="false"><description>客户partyId</description></attribute>
        <attribute name="customerPartyId" type="String" mode="OUT" optional="false"><description>可用余额</description></attribute>
    </service>
	
    <service name="getCardInfoByCode" engine="java"
            location="com.banfftech.cloudcard.CloudCardQueryServices" invoke="getCardInfoByCode" auth="true">
        <description>根据二维码查询卡信息</description>
        <attribute name="organizationPartyId" type="String" mode="IN" optional="false"><description>店家partyId</description></attribute>
        <attribute name="cardCode" type="String" mode="INOUT" optional="false"><description>卡二维码、条码等唯一标识数据</description></attribute>

        <attribute name="isActivated" type="String" mode="OUT" optional="false"><description>此卡是否已开通（激活）</description></attribute>
        <attribute name="cardId" type="String" mode="OUT" optional="true"><description>卡Id</description></attribute>
        <attribute name="cardName" type="String" mode="OUT" optional="true"><description>卡名</description></attribute>
        <attribute name="cardImg" type="String" mode="OUT" optional="true"><description>卡图片地址</description></attribute>
        <attribute name="cardBalance" type="BigDecimal" mode="OUT" optional="true"><description>可用余额</description></attribute>
        <attribute name="distributorPartyId" type="String" mode="OUT" optional="true"><description>发卡商家partyId</description></attribute>
        <attribute name="customerPartyId" type="String" mode="OUT" optional="true"><description>客户partyId</description></attribute>
        <attribute name="ownerPartyId" type="String" mode="OUT" optional="true"><description>原卡主partyId</description></attribute>
	</service>
	
	<service name="getLimitAndPresellInfo" engine="java"
		location="com.banfftech.cloudcard.CloudCardQueryServices" invoke="getLimitAndPresellInfo" auth="true">
		<description>查询开卡额度和已卖卡金额信息</description>
        <attribute name="organizationPartyId" type="String" mode="IN" optional="false"/>
        <attribute name="presellAmount" type="BigDecimal" mode="OUT" optional="false"/>
        <attribute name="authAmount" type="BigDecimal" mode="OUT" optional="false"/>
        <attribute name="actualBalance" type="BigDecimal" mode="OUT" optional="false"/>
	</service>
	
	<service name="createPaymentAndFinAccountTransForCloudCard" engine="simple"
            location="component://cloudcard/script/com/banfftech/cloudcard/CloudCardServices.xml" invoke="createPaymentAndFinAccountTransForCloudCard" auth="true">
        <description> create new payment and associate with respective financial account in FinAccountTrans Entity,
        Notice: Only CloudCard use, 
        base on : component://accounting/script/org/ofbiz/accounting/finaccount/FinAccountServices.xml#createPaymentAndFinAccountTrans
        </description>
        <implements service="createPayment"/>
        <attribute name="finAccountId" type="String" mode="IN" optional="true"/>
        <attribute name="finAccountTransTypeId" type="String" mode="IN" optional="false"/>
        <attribute name="reasonEnumId" type="String" mode="IN" optional="true"/>
        <attribute name="paymentMethodId" type="String" mode="IN" optional="true"/>
        <attribute name="paymentId" type="String" mode="OUT" optional="true"/>
    </service>
    
    <service name="getLoginCaptcha" engine="java"
		location="com.banfftech.cloudcard.sms.SmsServices" invoke="getLoginCaptcha" auth="false">
		<description>获取登录验证码</description>
        <attribute name="teleNumber" type="String" mode="IN" optional="false"/>
	</service>
    
    <service name="bizAppLogin" engine="java"
		location="com.banfftech.cloudcard.sms.SmsServices" invoke="bizAppLogin" auth="false">
		<description>商家手机登录</description>
        <attribute name="teleNumber" type="String" mode="IN" optional="false"/>
        <attribute name="captcha" type="String" mode="IN" optional="false"/>
        <attribute name="token" type="String" mode="OUT" optional="true"/>
        <attribute name="organizationPartyId" type="String" mode="OUT" optional="true"/>
	</service>
    
    <service name="userAppLogin" engine="java"
		location="com.banfftech.cloudcard.sms.SmsServices" invoke="userAppLogin" auth="false">
		<description>用户手机登录</description>
        <attribute name="teleNumber" type="String" mode="IN" optional="false"/>
        <attribute name="captcha" type="String" mode="IN" optional="false"/>
        <attribute name="token" type="String" mode="OUT" optional="true"/>
        <attribute name="organizationPartyId" type="String" mode="OUT" optional="true"/>
	</service>
	
	<service name="genNewCloudCardCode" engine="java"
		location="com.banfftech.cloudcard.CloudCardServices" invoke="genNewCloudCardCode" auth="true">
		<description>生成云卡卡号</description>
		<attribute name="organizationPartyId" type="String" mode="IN" optional="false"/>
        <attribute name="finAccountName" type="String" mode="IN" optional="false"/>
        <attribute name="currencyUomId" type="String" mode="IN" optional="false"/>
        <attribute name="quantity" type="String" mode="IN" optional="false"/>
        <attribute name="result" type="String" mode="OUT" optional="true"/>
	</service>
	
</services>